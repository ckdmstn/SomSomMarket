<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header">
    <meta charset="UTF-8">
    <title>아이디 찾기</title>
</head>
<body>
<script>
    function onSubmit() {
        var email = $('#email').val();
        var phone = $('#phone').val();

        if (email == '') {
            alert('이메일 주소를 입력해주세요.');
            return false;
        }
        if (phone == '') {
            alert('전화번호를 입력해주세요.');
            return false;
        }

        $.ajax({
			type : "POST",
			url : "/user/findId",
			data : {
				"email" : email, "phone" : phone
			},
			success : function(responseVal) {
			    if (responseVal.code == "OK") {
                    var id = responseVal.idList;
                    var str = "아이디 : ";
                    for (var i=0 in id) {
                        str += id[i].id + " / ";
                    }
                    $('#idAlert').text(str);
			    } else {
                    $('#idAlert').text("아이디를 찾을 수 없습니다.");
			    }
			}
		});
    }
</script>

<div class="form-group">
    <label th:for="email">이메일</label>
    <input type="text" id="email" name="email" class="form-control" placeholder="이메일 주소를 입력해주세요">
</div>
<br>
<div class="form-group">
    <label th:for="phone">전화번호</label>
    <input type="text" id="phone" name="phone" class="form-control" placeholder="전화번호를 입력해주세요">
</div>
<br>
<input type="button" onClick="onSubmit()" value="찾기"><br><br>

<span id="idAlert" style="color:red;"></span>

</body>
</html>